<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-cardano-node/configuration-files" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Configuration files | Cardano</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/cardano-node/configuration-files"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Configuration files | Cardano"><meta data-rh="true" name="description" content="The topology.json file"><meta data-rh="true" property="og:description" content="The topology.json file"><meta data-rh="true" name="keywords" content="Get-started,download,binaries,installation,cardano-node"><link data-rh="true" rel="icon" href="/img/cardano.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/cardano-node/configuration-files"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cardano-node/configuration-files" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cardano-node/configuration-files" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Cardano RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Cardano Atom Feed"><link rel="stylesheet" href="/assets/css/styles.4981c460.css">
<script src="/assets/js/runtime~main.a6af05e3.js" defer="defer"></script>
<script src="/assets/js/main.cc67bbf1.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/cardano-logo.png" alt="cardano docs" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/cardano-logo-darkmode.png" alt="cardano docs" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Documentation</b></a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Welcome</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/cardano-node/build-from-source">Cardano Node</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cardano-node/build-from-source">Build from source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cardano-node/build-with-nix">Build with nix</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cardano-node/precompiled-binaries">Pre-compiled binaries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cardano-node/configuration-files">Configuration files</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cardano-node/running-node">Run the node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cardano-node/p2p">Peer to peer</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/cardano-node/new-tracing-system/trace-dispatcher">New tracing system</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cardano-cli/build-cli-from-source">Cardano CLI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/plutus/welcomePlutus">Plutus</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cardano-devs/ADR/ADR-0-Documenting-Architecture-Decisions">For Cardano Developers</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Cardano Node</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Configuration files</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Configuration files for cardano-node</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-topologyjson-file">The topology.json file<a href="#the-topologyjson-file" class="hash-link" aria-label="Direct link to The topology.json file" title="Direct link to The topology.json file">​</a></h2>
<p>This file tells your node which nodes in the network it should talk to. A minimal version of this file looks as follows:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Producers&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;addr&quot;: &quot;x.x.x.x&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;port&quot;: 3001,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;valency&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>This means that your node will contact the node at IP <code>x.x.x.x</code> on <code>port 3001</code>.</p>
</li>
<li>
<p><code>valency</code> defines the number of active (hot) outgoing connections to different resolved IP addresses that your node should maintain when a DNS address is specified. The valency setting has no impact when setting an IP address, except when using <code>0</code> to disable the connection.</p>
</li>
</ul>
<p>Your <strong>block-producing</strong> node must <strong>ONLY</strong> talk to your <strong>relay nodes</strong>, and the relay nodes should talk to other relay nodes in the network. See this <a href="https://explorer.cardano.org/relays/topology.json" target="_blank" rel="noopener noreferrer">topology</a> to find out the IP addresses and ports of peers. The <code>topology.json</code> found at this link is updated once a week.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-p2p-topologyjson-file">The P2P topology.json file<a href="#the-p2p-topologyjson-file" class="hash-link" aria-label="Direct link to The P2P topology.json file" title="Direct link to The P2P topology.json file">​</a></h2>
<p>The P2P topology file specifies how to obtain the <em>root peers</em> (or <em>bootstrapping
peers</em>).</p>
<ul>
<li>
<p>The term <em>local roots</em> refers to a group of peer nodes with which a node will aim to
maintain a specific number of active, or &#x27;hot&#x27; connections. These hot connections are
those that play an active role in the consensus algorithm. Conversely, &#x27;warm&#x27;
connections refer to those not yet actively participating in the consensus algorithm.</p>
<p>Local roots should comprise local relays or a local block-producing node, and any other
peers that the node needs to maintain a connection with. These connections are
typically kept private.</p>
</li>
<li>
<p><em>public roots</em>: additional bootstrapping nodes. They are either read from
the configuration file directly or from the chain. The configured ones
will be used to pass a recent snapshot of peers needed before the node caches up
with the recent enough chain to construct root peers by itself.</p>
</li>
</ul>
<p>The node does not guarantee a connection with every public root, unlike local ones. However, by being present in the set, it gets an opportunity to establish an outbound connection with that peer.</p>
<p>A minimal version of this file looks like this:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;localRoots&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      { &quot;accessPoints&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;address&quot;: &quot;x.x.x.x&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;port&quot;: 3001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;advertise&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;valency&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;publicRoots&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    { &quot;accessPoints&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;address&quot;: &quot;y.y.y.y&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;port&quot;: 3002</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;advertise&quot;: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;useLedgerAfterSlot&quot;: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>The main difference between <code>LocalRoots</code> and <code>PublicRoots</code> is the ability to specify various groups with varying valencies in the former. This can be valuable for informing your node about different targets within a group to achieve. <code>LocalRoots</code> is designed for peers that the node should always keep as hot, such as its own block producer. On the other hand, <code>PublicRoots</code> serves as a source of fallback peers, to be used if peers from the ledger (when <code>useLedgerAfterSlot</code> is disabled or unavailable) cannot be accessed.</p>
</li>
<li>
<p>This means that your node will initiate contact with the node at IP <code>x.x.x.x</code> on <code>port 3001</code> and resolve the DNS domain <code>y.y.y.y</code> (provided it exists). It will then make efforts to establish a connection with at least one of the resolved IPs.</p>
</li>
<li>
<p><code>valency</code> (or <code>hotValency</code>) tells the node the number of connections it should attempt to select from the specified group. When a DNS address is provided, valency determines the count of resolved IP addresses for which the node should maintain an active (hot) connection.</p>
</li>
</ul>
<ul>
<li>
<p><code>warmValency</code> is an optional field, similar to <code>valency</code> or <code>hotValency</code>, that informs the node about the number of peers it should maintain as established (warm). This field is optional and defaults to the value set in the <code>valency</code> or <code>hotValency</code> field. If a value is specified for <code>warmValency</code>, it should be greater than or equal to the one defined in <code>valency</code> or <code>hotValency</code>; otherwise, <code>valency</code> or <code>hotValency</code> will be adjusted to match this value. We recommend users set the <code>warmValency</code> value to <code>hotValency</code> + 1 to ensure at least one backup peer is available to be promoted to a hot connection in case of unexpected events.</p>
<p>Check <a href="https://github.com/intersectmbo/ouroboros-network/issues/4565" target="_blank" rel="noopener noreferrer">this issue</a> for more
context on this <code>WarmValency</code> addition.</p>
</li>
</ul>
<ul>
<li>
<p>Local root groups shall be non-overlapping.</p>
</li>
<li>
<p>The advertise parameter instructs a node about the acceptability of sharing its address
through <em>peer sharing</em> (which we&#x27;ll explain in more detail in a subsequent section). In
essence, if a node has activated peer sharing, it can receive requests from other nodes
seeking peers. However, it will only disclose those peers for which it has both local
and remote permissions.</p>
<p>Local permission corresponds to the value of the advertise parameter. On the other
hand, &#x27;remote permission&#x27; is tied to the <code>PeerSharing</code> value associated with the
remote address, which is ascertained after the initial handshake between nodes.</p>
</li>
<li>
<p>Local roots should not be greater than the <code>TargetNumberOfKnownPeers</code>.
If they are, they will get clamped to the limit.</p>
</li>
</ul>
<p>Your <strong>block-producing</strong> node must <strong>ONLY</strong> talk to your <strong>relay nodes</strong>, and the relay node should talk to other relay nodes in the network.</p>
<p>You have the option to notify the node of any changes to the topology configuration file
by sending a SIGHUP signal to the <code>cardano-node</code> process. This can be done, for example,
with the command <code>pkill -HUP cardano-node</code>. Upon receiving the signal, the <code>cardano-node</code>
will re-read the configuration file and restart all DNS resolutions.</p>
<p>Please be aware that this procedure is specific to the topology configuration file, not
the node configuration file. Additionally, the SIGHUP signal will prompt the system to
re-read the block forging credentials file paths and attempt to fetch them to initiate
block forging. If this process fails, block forging will be disabled. To re-enable block
forging, ensure that the necessary files are present.</p>
<p>You can disable ledger peers by setting the <code>useLedgerAfterSlot</code> to a negative
value.</p>
<p>If you are syncing the network for the first time, please connect to IOG relays at <code>relays-new.cardano-mainnet.iohkdev.io</code> by adding them to your local root peers. Additionally, set <code>useLedgerAfterSlot</code> to <code>0</code> to disable ledger peers. You have the flexibility to use different relays, but it&#x27;s important to ensure you trust them to provide an honest chain. Once your node is fully synced, feel free to remove these relays from your local root peers. Also, make it a practice to manually verify if other stake pool relays are on the same chain as yours. When you enable ledger peers by setting <code>useLedgerAfterSlot</code>, your node will establish connections with relays registered on the chain. It will actively churn through these peers by randomly selecting new ones based on stake distribution while also removing the least performing 20%.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-genesisjson-file">The genesis.json file<a href="#the-genesisjson-file" class="hash-link" aria-label="Direct link to The genesis.json file" title="Direct link to The genesis.json file">​</a></h2>
<p>The genesis file is generated with the <code>cardano-cli</code> by reading a <code>genesis.spec.json</code> file, which is out of scope for this document.
But it is important because it is used to set:</p>
<ul>
<li><code>genDelegs</code>, a mapping from genesis keys to genesis delegates</li>
<li><code>initialFunds</code>, a mapping from the initial addresses to the initial values at those addresses</li>
<li><code>maxLovelaceSupply</code>, the total amount of lovelaces in the blockchain</li>
<li><code>systemStart</code>, the time of slot zero.</li>
</ul>
<p>The <code>genesis.json</code> file looks like the one below:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;activeSlotsCoeff&quot;: 0.05,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;protocolParams&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;protocolVersion&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;minor&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;major&quot;: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;decentralisationParam&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;eMax&quot;: 18,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;extraEntropy&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;tag&quot;: &quot;NeutralNonce&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;maxTxSize&quot;: 16384,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;maxBlockBodySize&quot;: 65536,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;maxBlockHeaderSize&quot;: 1100,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;minFeeA&quot;: 44,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;minFeeB&quot;: 155381,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;minUTxOValue&quot;: 1000000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;poolDeposit&quot;: 500000000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;minPoolCost&quot;: 340000000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;keyDeposit&quot;: 2000000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;nOpt&quot;: 150,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;rho&quot;: 0.003,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;tau&quot;: 0.20,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;a0&quot;: 0.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;genDelegs&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ad5463153dc3d24b9ff133e46136028bdc1edbb897f5a7cf1b37950c&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;delegate&quot;: &quot;d9e5c76ad5ee778960804094a389f0b546b5c2b140a62f8ec43ea54d&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;vrf&quot;: &quot;64fa87e8b29a5b7bfbd6795677e3e878c505bc4a3649485d366b50abadec92d7&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;b9547b8a57656539a8d9bc42c008e38d9c8bd9c8adbb1e73ad529497&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;delegate&quot;: &quot;855d6fc1e54274e331e34478eeac8d060b0b90c1f9e8a2b01167c048&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;vrf&quot;: &quot;66d5167a1f426bd1adcc8bbf4b88c280d38c148d135cb41e3f5a39f948ad7fcc&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;60baee25cbc90047e83fd01e1e57dc0b06d3d0cb150d0ab40bbfead1&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;delegate&quot;: &quot;7f72a1826ae3b279782ab2bc582d0d2958de65bd86b2c4f82d8ba956&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;vrf&quot;: &quot;c0546d9aa5740afd569d3c2d9c412595cd60822bb6d9a4e8ce6c43d12bd0f674&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;f7b341c14cd58fca4195a9b278cce1ef402dc0e06deb77e543cd1757&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;delegate&quot;: &quot;69ae12f9e45c0c9122356c8e624b1fbbed6c22a2e3b4358cf0cb5011&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;vrf&quot;: &quot;6394a632af51a32768a6f12dac3485d9c0712d0b54e3f389f355385762a478f2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;162f94554ac8c225383a2248c245659eda870eaa82d0ef25fc7dcd82&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;delegate&quot;: &quot;4485708022839a7b9b8b639a939c85ec0ed6999b5b6dc651b03c43f6&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;vrf&quot;: &quot;aba81e764b71006c515986bf7b37a72fbb5554f78e6775f08e384dbd572a4b32&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;2075a095b3c844a29c24317a94a643ab8e22d54a3a3a72a420260af6&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;delegate&quot;: &quot;6535db26347283990a252313a7903a45e3526ec25ddba381c071b25b&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;vrf&quot;: &quot;fcaca997b8105bd860876348fc2c6e68b13607f9bbd23515cd2193b555d267af&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;268cfc0b89e910ead22e0ade91493d8212f53f3e2164b2e4bef0819b&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;delegate&quot;: &quot;1d4f2e1fda43070d71bb22a5522f86943c7c18aeb4fa47a362c27e23&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;vrf&quot;: &quot;63ef48bc5355f3e7973100c371d6a095251c80ceb40559f4750aa7014a6fb6db&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;updateQuorum&quot;: 5,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;networkId&quot;: &quot;Mainnet&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;initialFunds&quot;: {},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;maxLovelaceSupply&quot;: 45000000000000000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;networkMagic&quot;: 764824073,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;epochLength&quot;: 432000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;systemStart&quot;: &quot;2017-09-23T21:44:51Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;slotsPerKESPeriod&quot;: 129600,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;slotLength&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;maxKESEvolutions&quot;: 62,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;securityParam&quot;: 2160</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here is a brief description of each parameter. You can learn more in the <a href="https://github.com/intersectmbo/cardano-ledger/tree/master/eras/shelley/impl" target="_blank" rel="noopener noreferrer">spec</a>.</p>
<table><thead><tr><th>PARAMETER</th><th>MEANING</th></tr></thead><tbody><tr><td>activeSlotsCoeff</td><td>The proportion of slots in which blocks should be issued</td></tr><tr><td>poolDeposit</td><td>The amount of a pool registration deposit</td></tr><tr><td>protocolVersion</td><td>Accepted protocol versions</td></tr><tr><td>decentralisationParam</td><td>Percentage of blocks produced by federated nodes</td></tr><tr><td>maxTxSize</td><td>Maximum transaction size</td></tr><tr><td>minPoolCost</td><td>Stake pools cannot register/re-register their stake cost below this value</td></tr><tr><td>minFeeA</td><td>The linear factor for the minimum fee calculation</td></tr><tr><td>maxBlockBodySize</td><td>Maximum block body size</td></tr><tr><td>minFeeB</td><td>The constant factor for the minimum fee calculation</td></tr><tr><td>eMax</td><td>Epoch bound on pool retirement</td></tr><tr><td>extraEntropy</td><td>Well, extra entropy =)</td></tr><tr><td>maxBlockHeaderSize</td><td>Maximum block header size</td></tr><tr><td>keyDeposit</td><td>The amount of a key registration deposit</td></tr><tr><td>nOpt</td><td>Desired number of pools</td></tr><tr><td>rho</td><td>Monetary expansion</td></tr><tr><td>tau</td><td>Treasury expansion</td></tr><tr><td>a0</td><td>Pool&#x27;s pledge influence</td></tr><tr><td>networkMagic</td><td>Used to identify the testnets</td></tr><tr><td>systemStart</td><td>Time of slot 0</td></tr><tr><td>genDelegs</td><td>Mapping from genesis keys to genesis delegate</td></tr><tr><td>updateQuorum</td><td>Determines the quorum needed for votes on the protocol parameter updates</td></tr><tr><td>initialFunds</td><td>Mapping address to values</td></tr><tr><td>maxLovelaceSupply</td><td>The total number of lovelace in the system, used in the reward calculation</td></tr><tr><td>networkMagic</td><td>To identify the testnet</td></tr><tr><td>epochLength</td><td>Number of slots in an epoch</td></tr><tr><td>staking</td><td>Initial delegation</td></tr><tr><td>slotsPerKESPeriod</td><td>Number of slots in the KES period</td></tr><tr><td>slotLength</td><td>in seconds</td></tr><tr><td>maxKESEvolutions</td><td>The maximum number of times a KES key can be evolved before a pool operator must create a new operational certificate</td></tr><tr><td>securityParam</td><td>Security parameter k</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-configjson-file">The config.json file<a href="#the-configjson-file" class="hash-link" aria-label="Direct link to The config.json file" title="Direct link to The config.json file">​</a></h2>
<p>The default <code>config.json</code> file that we downloaded is shown below.</p>
<p>This file has <strong>4</strong> sections that allow you to have full control of what your node does and how the information is presented.</p>
<p><strong>NOTE: Due to how the config.json file is generated, fields on the real file are shown in a different (less coherent) order. Here we present them in a more structured way</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-node-configuration">Basic node configuration<a href="#basic-node-configuration" class="hash-link" aria-label="Direct link to Basic node configuration" title="Direct link to Basic node configuration">​</a></h3>
<p>The first section relates the basic node configuration parameters. Make sure you have <code>TPraos</code>as the protocol, the correct path to the <code>mainnet-shelley-genesis.json</code> file, and <code>RequiresMagic</code>for its use on testnet:</p>
<p>&quot;Protocol&quot;: &quot;TPraos&quot;,
&quot;GenesisFile&quot;: &quot;mainnet-shelley-genesis.json&quot;,
&quot;RequiresNetworkMagic&quot;: &quot;RequiresMagic&quot;,</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-parameters">Update parameters<a href="#update-parameters" class="hash-link" aria-label="Direct link to Update parameters" title="Direct link to Update parameters">​</a></h3>
<p>This protocol version number is used by block-producing nodes as part of the system for agreeing on and synchronizing protocol updates. You just need to be aware of the latest versions supported by the network. You don&#x27;t need to change anything here:</p>
<p>&quot;LastKnownBlockVersion-Alt&quot;: 0,
&quot;LastKnownBlockVersion-Major&quot;: 2,
&quot;LastKnownBlockVersion-Minor&quot;: 0,</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a href="#tracing" class="hash-link" aria-label="Direct link to Tracing" title="Direct link to Tracing">​</a></h3>
<p><code>Tracers</code> tell your node what information you are interested in when logging. Like switches that you can turn ON or OFF according to the type and quantity of information that you are interested in. This provides fairly coarse grained control, but it is relatively efficient at filtering out unwanted trace output:</p>
<p><code>TurnOnLogging</code>: enables or disables logging overall.</p>
<p><code>TurnOnLogMetrics</code>: enables the collection of various OS metrics such as memory and CPU use. These metrics can be directed to the logs or monitoring backends.</p>
<p><code>setupBackends</code>, <code>defaultBackends</code>, <code>hasEKG</code>and <code>hasPrometheus</code>: the system supports a number of backends for logging and monitoring. These settings list the backends available to use in the configuration. The logging backend is called <code>Katip</code>. Also, enable the EKG backend if you want to use the EKG or Prometheus monitoring interfaces.</p>
<p><code>setupScribes</code> and <code>defaultScribes</code>: you must set up outputs (called scribes) for the Katip logging backend. The available types of scribes are:</p>
<ul>
<li>FileSK: for files</li>
<li>StdoutSK/StderrSK: for stdout/stderr</li>
<li>JournalSK: for systemd&#x27;s journal system</li>
<li>DevNullSK</li>
<li>The scribe output format can be ScText or ScJson.</li>
</ul>
<p><code>rotation</code>: the default file rotation settings for Katip scribes, unless overridden in the setupScribes above for specific scribes.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TurnOnLogging&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TurnOnLogMetrics&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TracingVerbosity&quot;: &quot;NormalVerbosity&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;minSeverity&quot;: &quot;Debug&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceBlockFetchClient&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceBlockFetchDecisions&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceBlockFetchProtocol&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceBlockFetchProtocolSerialised&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceBlockFetchServer&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceBlockchainTime&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceChainDb&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceChainSyncBlockServer&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceChainSyncClient&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceChainSyncHeaderServer&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceChainSyncProtocol&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceDNSResolver&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceDNSSubscription&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceErrorPolicy&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceForge&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceHandshake&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceIpSubscription&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceLocalChainSyncProtocol&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceLocalErrorPolicy&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceLocalHandshake&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceLocalTxSubmissionProtocol&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceLocalTxSubmissionServer&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceMempool&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceMux&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceTxInbound&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceTxOutbound&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TraceTxSubmissionProtocol&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;setupBackends&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;KatipBK&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;defaultBackends&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;KatipBK&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;hasEKG&quot;: 12788,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;hasPrometheus&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;127.0.0.1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  12798</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;setupScribes&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;scFormat&quot;: &quot;ScText&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;scKind&quot;: &quot;StdoutSK&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;scName&quot;: &quot;stdout&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;scRotation&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;defaultScribes&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;StdoutSK&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;stdout&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;rotation&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;rpKeepFilesNum&quot;: 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;rpLogLimitBytes&quot;: 5000000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;rpMaxAgeHours&quot;: 24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fine-grained-logging-control">Fine grained logging control<a href="#fine-grained-logging-control" class="hash-link" aria-label="Direct link to Fine grained logging control" title="Direct link to Fine grained logging control">​</a></h3>
<p>It is also possible to have more fine grained control over filtering of trace output, and to match and route trace output to particular backends. This is less efficient than the coarse trace filters above but provides much more precise control. <code>options</code>:</p>
<p><code>mapBackends</code>: this routes metrics matching specific names to particular backends. This overrides the defaultBackends listed above. Note that it is an <strong>override</strong> and not an extension so anything matched here will not go to the default backend, only to the explicitly listed backends.</p>
<p><code>mapSubtrace</code>: this section is more expressive, work on its documentation is ongoing.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">	  &quot;options&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	    &quot;mapBackends&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	      &quot;cardano.node.metrics&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	        &quot;EKGViewBK&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	    &quot;mapSubtrace&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	      &quot;cardano.node.metrics&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	        &quot;subtrace&quot;: &quot;Neutral&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="peer-to-peer-p2p-parameters-and-tracers">Peer-to-peer (P2P) parameters and tracers<a href="#peer-to-peer-p2p-parameters-and-tracers" class="hash-link" aria-label="Direct link to Peer-to-peer (P2P) parameters and tracers" title="Direct link to Peer-to-peer (P2P) parameters and tracers">​</a></h3>
<p>To run a node in P2P mode, configure the <code>EnableP2P</code> setting to <code>true</code> (the default is <code>False</code>) in the configuration file. Additionally, ensure you specify the topology in the new format as described above.</p>
<p>There are a few new tracers and configuration options that you can set (listed below by
component):</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="outbound-governor">Outbound governor<a href="#outbound-governor" class="hash-link" aria-label="Direct link to Outbound governor" title="Direct link to Outbound governor">​</a></h4>
<p>The outbound governor is responsible for satisfying targets of root peers, known (<em>cold</em>,
<em>warm</em> and <em>hot</em>), established (<em>warm</em> and <em>hot</em>) and active peers (synonym for <em>hot</em> peers)
and local root peers.  The primary way to configure them is by setting the following
options:</p>
<ul>
<li><code>TargetNumberOfRootPeers</code> (<em>default value: <code>100</code></em>) - a minimal number of root peers
(unlike other targets this one is one-sided, eg, a node might have more root peers</li>
<li><code>TargetNumberOfKnownPeers</code> (<em>default value: <code>100</code></em>) - a target of known peers (must be
larger or equal to <code>TargetNumberOfRootPeers</code>)</li>
<li><code>TargetNumberOfEstablishedPeers</code> (<em>default value: <code>50</code></em>) - a target of all established
peers (including local roots, ledger peers)</li>
<li><code>TargetNumberOfActivePeers</code> (<em>default value: <code>20</code></em>) - a target for <em>hot</em> peers, which
engage in the consensus protocol.</li>
</ul>
<p>Let&#x27;s take note of two additional targets. In the topology file, you have the option to include local root peers. This comprises a list of peer groups, with each group having its own valency. The outbound governor ensures a connection with every local root peer and ensures that at least the specified number of them (the valency) are actively connected (hot). Consequently, the values for <code>TargetNumberOfKnownPeers</code>, <code>TargetNumberOfEstablishedPeers</code>, and <code>TargetNumberOfActivePeers</code> should be set sufficiently high to accommodate these local root peers.</p>
<p>The following traces can be enabled:</p>
<ul>
<li><code>TracePeerSelection</code> (<em>by default on</em>) - tracks the selection of upstream peers done by the
<em>outbound-governor</em>.  <strong>Warm peers</strong> are ones with which we have an open connection but
don&#x27;t engage in consensus protocol, <strong>hot peers</strong> are peers which engage in consensus
protocol (via <code>chain-sync</code>, <code>block-fetch</code>, and <code>tx-submission</code> mini-protocols), <strong>cold
peers</strong> are ones that we know about but the node doesn&#x27;t have an established
connection with.  Note that the notions of <em>hot</em>, <em>warm</em> and <em>cold</em> are only related to usage
of initiator sides of mini-protocols in a connection (which can be either inbound or
outbound).</li>
<li><code>TracePeerSelectionCounters</code> (<em>by default on</em>) - traces how many cold/warm/hot/local
root peers the node has, it&#x27;s also available via EKG.</li>
<li><code>TracePeerStateActions</code> (<em>by default on</em>) - includes traces from a component, which
executes peer promotion/demotions between cold/warm and hot states.</li>
<li><code>TracePublicRootPeers</code> (<em>by default off</em>) - traces information about root/ledger peers
(eg, IP addresses or DNS names of ledger peers, DNS resolution)</li>
<li><code>DebugPeerSelectionInitiator</code> and <code>DebugPeerSelectionInitiatorResponder</code> (<em>by default
off</em>) - debug tracers that log the information about the current state of the <em>outbound
governor</em>.</li>
</ul>
<p>At this point <a href="https://ouroboros-network.cardano.intersectmbo.org/ouroboros-network/Ouroboros-Network-PeerSelection-Governor.html" target="_blank" rel="noopener noreferrer">Haddock
documentation</a>
of the outbound governor is available.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="peer-sharing">Peer sharing<a href="#peer-sharing" class="hash-link" aria-label="Direct link to Peer sharing" title="Direct link to Peer sharing">​</a></h4>
<p>Peer sharing is a novel feature that provides an additional method for the outbound
governor to reach its targets for known peers. With peer sharing, the node can request
peer information from other nodes with which it has an established connection.</p>
<p><strong>IMPORTANT:</strong> <em>Peer sharing</em> is an experimental feature that is turned off by default.
Please be aware that until the availability of Genesis and eclipse evasion, this feature may
leave a node vulnerable to eclipse attacks.</p>
<p>The main method for configuring peer sharing involves setting the following option:</p>
<ul>
<li><code>PeerSharing</code> (default value: <code>PeerSharingDisabled</code>) - this option can take two possible values:<!-- -->
<ul>
<li><code>PeerSharingDisabled</code>: peer sharing is disabled, which means the node won&#x27;t request peer
information from any other node, and will not respond to such requests from others
(the mini-protocol won&#x27;t even start);</li>
<li><code>PeerSharingEnabled</code>: peer Sharing is enabled and the node will notify other nodes
that it is permissible to share its address.</li>
</ul>
</li>
</ul>
<p>The <code>PeerSharing</code> flag interacts with <code>PeerAdvertise</code> (<code>advertise</code> flag in the topology
file) values as follows:</p>
<p><code>AdvertisePeer</code> (<code>advertise: true</code>) is local to the configuration of a specific node. A
node might be willing to share those peers it has set as <code>PeerAdvertise</code>. Conversely,
<code>PeerSharing</code> is about whether the peer (itself) is willing to participate in
<code>PeerSharing</code>.</p>
<p><code>PeerSharing</code> takes precedence over <code>AdvertisePeer</code>. Consider the following example:</p>
<p>A block-producing node (BP) has the <code>NoPeerSharing</code> flag value (which means it won&#x27;t participate
in peer sharing or run the mini-protocol). A relay node has the BP set as a local peer
configured as <code>AdvertisePeer</code> (likely a misconfiguration). When the handshake between the
BP and the relay occurs, the relay will see that the BP doesn&#x27;t want to participate in
peer sharing. As a result, it won&#x27;t engage in peer sharing with it or share its details
with others.</p>
<p>In the handshake, if either party has <code>PeerSharingDisabled</code>, that value will be negotiated, resulting in the absence of any peer sharing protocol between the two parties. Peer sharing will only be enabled if both parties have <code>PeerSharingEnabled</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="inbound-governor">Inbound governor<a href="#inbound-governor" class="hash-link" aria-label="Direct link to Inbound governor" title="Direct link to Inbound governor">​</a></h4>
<p>The inbound governor is maintaining the responder side of all mini-protocols. Unlike the
outbound governor, it is a purely responsive component that reacts to the actions of the remote
peer (its outbound governor).</p>
<ul>
<li><code>TraceInboundGovernor</code> (<em>by default on</em>) - traces information about inbound connection,
eg, we track if the remote side is using  our node as <em>warm</em> or <em>hot peer</em>, traces when
we restart a responder.</li>
<li><code>TraceInboundGovernorCounters</code> (<em>by default on</em>) - traces the number of peers which use the
node as <code>cold</code>, <code>warm</code> or <code>hot</code> (which we call <code>remote cold</code>, <code>remote warm</code> or <code>remote hot</code>). Note that we only know if a peer is in the remote cold state if we connect to
that peer and it&#x27;s not using the connection. This information is also available via
EKG.</li>
<li><code>TraceInboundGovernorTransitions</code> (<em>by default on</em>) - a debug tracer which traces
transitions between remote cold, remote warm, and remote hot states.</li>
</ul>
<p>The inbound governor is documented in <a href="https://ouroboros-network.cardano.intersectmbo.org/pdfs/network-spec" target="_blank" rel="noopener noreferrer">The Shelley networking
protocol</a> (section 4.5).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="connection-manager">Connection manager<a href="#connection-manager" class="hash-link" aria-label="Direct link to Connection manager" title="Direct link to Connection manager">​</a></h4>
<p>The connection manager tracks the state of all TCP connections, and enforces various timeouts, for example,
when the connection is not used by either of the sides. The following traces are
available:</p>
<ul>
<li><code>TraceConnectionManager</code> (<em>by default on</em>) - traces information about new inbound or
outbound connections, connection errors.</li>
<li><code>TraceConnectionManagerCounters</code> (<em>by default on</em>) - traces the number of inbound,
outbound, duplex (connections which negotiated P2P mode and can use a connection in full
duplex mode), full duplex (connections that run mini-protocols in both directions, eg,
at least <em>warm</em> and <em>remote warm</em> at the same time), unidirectional connections
(connections with non-P2P nodes, or P2P nodes, which configured themselves as initiator
only nodes).</li>
<li><code>TraceConnectionManagerTransitions</code> (<em>by default on</em>) - low level traces which trace
connection state changes in the connection manager state machine.</li>
</ul>
<p>The connection manager is documented in <a href="https://ouroboros-network.cardano.intersectmbo.org/pdfs/network-spec" target="_blank" rel="noopener noreferrer">The Shelley networking
protocol</a> (section 4).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ledger-peers">Ledger peers<a href="#ledger-peers" class="hash-link" aria-label="Direct link to Ledger peers" title="Direct link to Ledger peers">​</a></h4>
<p>Ledger peers are the relays registered on the chain. Currently, we use a square of the stake
distribution to randomly pick new ledger peers. You can enable <code>TraceLedgerPeers</code> (<em>by
default off</em>) to log actions taken by this component.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="server">Server<a href="#server" class="hash-link" aria-label="Direct link to Server" title="Direct link to Server">​</a></h4>
<p>The accept loop. You can enable <code>TraceServer</code> to log its actions or errors it encounters
(<em>by default it is off</em>, however we suggest to turn it on) .</p>
<p><strong>Please note that this version contains no breaking changes</strong></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/cardano-node/configurationFiles.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/cardano-node/precompiled-binaries"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Pre-compiled binaries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cardano-node/running-node"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Run the node</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-topologyjson-file" class="table-of-contents__link toc-highlight">The topology.json file</a></li><li><a href="#the-p2p-topologyjson-file" class="table-of-contents__link toc-highlight">The P2P topology.json file</a></li><li><a href="#the-genesisjson-file" class="table-of-contents__link toc-highlight">The genesis.json file</a></li><li><a href="#the-configjson-file" class="table-of-contents__link toc-highlight">The config.json file</a><ul><li><a href="#basic-node-configuration" class="table-of-contents__link toc-highlight">Basic node configuration</a></li><li><a href="#update-parameters" class="table-of-contents__link toc-highlight">Update parameters</a></li><li><a href="#tracing" class="table-of-contents__link toc-highlight">Tracing</a></li><li><a href="#fine-grained-logging-control" class="table-of-contents__link toc-highlight">Fine grained logging control</a></li><li><a href="#peer-to-peer-p2p-parameters-and-tracers" class="table-of-contents__link toc-highlight">Peer-to-peer (P2P) parameters and tracers</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cardano-node/build-from-source">Cardano Node</a></li><li class="footer__item"><a class="footer__link-item" href="/cardano-cli/build-cli-from-source">Cardano CLI</a></li><li class="footer__item"><a href="https://github.com/IntersectMBO" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contributing<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://cardano.stackexchange.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Exchange<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/z5pURn74N5" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/Cardano_CF" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter Cardano Foundation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/InputOutputHK" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter IntersectMBO<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/IntersectMBO" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/IntersectMBO" target="_blank" rel="noopener noreferrer" class="footer__link-item">Disclaimer<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © IOG 2024</div></div></div></footer></div>
</body>
</html>